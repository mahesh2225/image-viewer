{"ast":null,"code":"import _classCallCheck from \"E:\\\\Upgrad7\\\\image-viewer-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\Upgrad7\\\\image-viewer-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\Upgrad7\\\\image-viewer-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\Upgrad7\\\\image-viewer-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\Upgrad7\\\\image-viewer-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"E:\\\\Upgrad7\\\\image-viewer-master\\\\src\\\\screens\\\\home\\\\Home.js\";\nimport React, { Component } from 'react';\nimport Header from '../../common/header/Header';\nimport MediaCard from '../../common/card/MediaCard';\nimport { Container } from '@material-ui/core';\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home() {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this));\n\n    _this.checkIfExist = function (element) {\n      return element.caption.text.toUpperCase().split(\"#\")[0].indexOf(_this.state.searchText.toUpperCase()) > -1;\n    };\n\n    _this.onSearchHandler = function (event) {\n      console.log(\"onSearchHandler\");\n\n      _this.setState({\n        searchText: event.target.value\n      });\n\n      if (_this.state.searchText == null || _this.state.searchText.trim() === \"\") {\n        _this.setState({\n          userMediaDataFiltered: _this.state.userMediaDataOrig\n        });\n      } else {\n        var userMediaDataFiltered = _this.state.userMediaDataOrig.filter(_this.checkIfExist);\n\n        _this.setState({\n          userMediaDataFiltered: userMediaDataFiltered\n        });\n      }\n    };\n\n    _this.state = {\n      loggedIn: sessionStorage.getItem(\"access-token\") == null ? false : true,\n      userProfileData: null,\n      userMediaDataOrig: null,\n      userMediaDataFiltered: null,\n      searchText: null\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      if (this.state.loggedIn === false) {\n        this.props.history.push('/login');\n      }\n\n      fetch(this.props.baseUrl + \"?access_token=\" + sessionStorage.getItem(\"access-token\")).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        _this2.setState({\n          userProfileData: result.data\n        });\n      }, function (error) {\n        console.log(\"Error while fetching user profile data from Instagram.\", error);\n      });\n      fetch(this.props.baseUrl + \"media/recent/?access_token=\" + sessionStorage.getItem(\"access-token\")).then(function (res) {\n        return res.json();\n      }).then(function (result) {\n        _this2.setState({\n          userMediaDataOrig: result.data,\n          userMediaDataFiltered: result.data\n        });\n      }, function (error) {\n        console.log(\"Error while fetching user media data from Instagram.\", error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(Header, Object.assign({}, this.props, {\n        showSearchBar: true,\n        showProfileIcon: true,\n        showOnlyLogoutMenu: false,\n        searchHandler: this.onSearchHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      })), React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(MediaCard, Object.assign({}, this.props, {\n        userMediaData: this.state.userMediaDataFiltered,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["E:/Upgrad7/image-viewer-master/src/screens/home/Home.js"],"names":["React","Component","Header","MediaCard","Container","Home","checkIfExist","element","caption","text","toUpperCase","split","indexOf","state","searchText","onSearchHandler","event","console","log","setState","target","value","trim","userMediaDataFiltered","userMediaDataOrig","filter","loggedIn","sessionStorage","getItem","userProfileData","props","history","push","fetch","baseUrl","then","res","json","result","data","error"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Header from '../../common/header/Header';\nimport MediaCard from '../../common/card/MediaCard';\nimport { Container } from '@material-ui/core';\n\nclass Home extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loggedIn: sessionStorage.getItem(\"access-token\") == null ? false : true,\n      userProfileData: null,\n      userMediaDataOrig: null,\n      userMediaDataFiltered: null,\n      searchText: null\n    }\n  }\n  componentWillMount() {\n    if (this.state.loggedIn === false) {\n      this.props.history.push('/login');\n    }\n    fetch(\n      this.props.baseUrl +\n      \"?access_token=\" +\n      sessionStorage.getItem(\"access-token\")\n    )\n      .then(res => res.json())\n      .then(\n          result => {\n            this.setState({userProfileData: result.data});\n          },\n          error => {\n            console.log(\"Error while fetching user profile data from Instagram.\",error);\n          }\n      );\n\n  fetch(\n      this.props.baseUrl +\n      \"media/recent/?access_token=\" +\n      sessionStorage.getItem(\"access-token\")\n  )\n      .then(res => res.json())\n      .then(\n          result => {\n            this.setState({userMediaDataOrig: result.data, userMediaDataFiltered: result.data });\n          },\n          error => {\n            console.log(\"Error while fetching user media data from Instagram.\",error);\n          }\n      );  \n    \n  }\n\n  checkIfExist = (element) => {\n    return element.caption.text.toUpperCase().split(\"#\")[0].indexOf(this.state.searchText.toUpperCase()) > -1\n  }\n\n  onSearchHandler = event => {\n    console.log(\"onSearchHandler\");\n    this.setState({ searchText: event.target.value });\n    if ( this.state.searchText == null || this.state.searchText.trim() === \"\" ) {\n      this.setState({userMediaDataFiltered: this.state.userMediaDataOrig});\n    } else {\n      var userMediaDataFiltered = this.state.userMediaDataOrig.filter( this.checkIfExist );\n      this.setState({userMediaDataFiltered: userMediaDataFiltered});\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Header {...this.props} showSearchBar={true} showProfileIcon={true} showOnlyLogoutMenu={false} searchHandler={this.onSearchHandler}/>\n        <Container>\n            <MediaCard {...this.props} userMediaData={this.state.userMediaDataFiltered}/>\n        </Container>\n      </div>\n    )\n  }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}